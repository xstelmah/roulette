<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
>

<h:head>

</h:head>
<h:body>

    <ui:composition template="/WEB-INF/views/template/templateLayout.xhtml">
        <ui:define name="content">
            <h:form id="playForm">
                <p:growl id="growl" showDetail="true" showSummary="false" life="3000"/>

                <div class="row">
                    <div class="col-sm-2">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-sm-12">
                                    <div class="col-sm-2">
                                        <h:outputLabel value="Bet: " for="selectedBetMenu"/>
                                    </div>
                                    <div class="col-sm-10">
                                        <h:selectOneMenu id="selectedBetMenu"
                                                         valueChangeListener="#{gameBean.onSelectBet}">
                                            <f:selectItem itemLabel="--- select ---" itemValue="#{null}"/>
                                            <f:selectItems value="${gameBean.bets}" var="bet"
                                                           itemLabel="${bet.betValue}"
                                                           itemValue="${bet}"/>
                                            <f:ajax render="baseWinItems"/>
                                        </h:selectOneMenu>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-sm-offset-1 col-md-11">
                                    <div class="btn_container">
                                        <h:commandButton value="play"
                                                         styleClass="btn btn-lg btn-block btn-primary start"
                                                         action="#{gameBean.playGame(userBean.user)}"
                                        >
                                            <f:ajax render="dialogGroup growl :menuForm:menuUserInfo"/>
                                        </h:commandButton>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <div class="panel panel-success">
                            <div class="panel-heading">
                                <h3 class="panel-title">
                                    You can win this items
                                </h3>
                            </div>
                            <div class="panel-body">
                                <h:panelGroup id="baseWinItems">
                                    <c:forEach items="#{gameBean.baseWinItems}" var="image">
                                        <h:graphicImage width="99" height="66" style="margin: 2px; "
                                                        value="resources/images/${image.name}.jpg"/>
                                    </c:forEach>
                                </h:panelGroup>
                            </div>
                        </div>
                    </div>
                </div>

                <h:panelGroup id="dialogGroup">
                    <p:dialog binding="#{gameBean.dialog}" id="qwe" widgetVar="dlg2" modal="true" height="120"
                              dynamic="true" resizable="false">
                        <h:panelGroup id="roullete-group">
                            <div class="roullete-layer">
                                <div class="roullete-arrow"></div>
                                <div id="roulette" class="roullete">
                                    <c:forEach items="#{gameBean.renderItems}" var="image">
                                        <h:graphicImage styleClass="roullete-image"
                                                        value="resources/images/${image.name}.jpg"/>
                                    </c:forEach>
                                </div>
                            </div>
                            <h:outputScript name="roullete/js/roullete.js"/>
                            <h:outputScript>
                                onRoll();
                            </h:outputScript>
                        </h:panelGroup>
                    </p:dialog>
                </h:panelGroup>
            </h:form>
        </ui:define>
    </ui:composition>

</h:body>

</html>